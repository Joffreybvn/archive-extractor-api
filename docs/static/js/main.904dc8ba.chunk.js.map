{"version":3,"sources":["components/upload_box/upload_box.module.scss","app.module.scss","components/upload_box/uploaded_file/uploaded_file.module.scss","components/upload_box/uploaded_file/close.svg","components/upload_box/uploaded_file/archive.svg","components/upload_box/uploaded_file/uploaded_file.js","components/upload_box/upload_box.js","app.js","index.js"],"names":["module","exports","UploadedFile","props","uploadFile","file","data","FormData","append","name","request","XMLHttpRequest","withCredentials","responseType","upload","addEventListener","event","setState","barPercent","loaded","total","status","link","document","createElement","href","window","URL","createObjectURL","response","download","click","reader","FileReader","barColor","content","JSON","parse","result","readAsText","open","send","removeFile","key","state","undefined","this","className","uploaded","image","src","archiveImage","alt","file_name","remove","RemoveImage","title","onClick","progress","progress_bar","style","width","backgroundColor","React","Component","UploadBox","triggerInputFile","getElementById","uploadFiles","target","files","Math","floor","random","uploadedFiles","value","parent","self","index","newUploadedFiles","splice","wrapper","type","id","accept","multiple","onChange","upload_button","App","file_upload","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.904dc8ba.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"upload_box_wrapper__2IjXY\",\"upload\":\"upload_box_upload__3fcXu\",\"upload_button\":\"upload_box_upload_button__2wnDc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"file_upload\":\"app_file_upload__2hGc4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uploaded\":\"uploaded_file_uploaded__1lCNI\",\"image\":\"uploaded_file_image__2Wk_D\",\"remove\":\"uploaded_file_remove__1arVv\",\"file_name\":\"uploaded_file_file_name__2tdQt\",\"progress\":\"uploaded_file_progress__1vfmk\",\"progress_bar\":\"uploaded_file_progress_bar__155tD\",\"progress_bar_stripes\":\"uploaded_file_progress_bar_stripes__srNKc\",\"content\":\"uploaded_file_content__2zXkC\"};","export default __webpack_public_path__ + \"static/media/close.734e2651.svg\";","export default __webpack_public_path__ + \"static/media/archive.4d5e04d3.svg\";","\nimport React from \"react\";\nimport RemoveImage from \"./close.svg\"\nimport archiveImage from \"./archive.svg\"\nimport {\n    uploaded,\n    image,\n    file_name,\n    remove,\n    progress,\n    progress_bar,\n    content\n} from \"./uploaded_file.module.scss\"\n\n\nclass UploadedFile extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            barPercent: 0,\n            barColor: '#28a745',\n            content: undefined,\n        }\n    }\n\n    /**\n     * Triggered after the first render. Start the file upload.\n     */\n    componentDidMount() {\n        this.uploadFile(this.props.file)\n    }\n\n    /**\n     * Upload the file with XMLHttpRequest, update the progress bar and handle the response.\n     * @param file\n     */\n    uploadFile = (file) => {\n\n        // Setup a Form Data\n        const data = new FormData();\n        data.append(\"file\", file, file.name);\n\n        // Create a request\n        const request = new XMLHttpRequest();\n        request.withCredentials = true;\n        request.responseType = 'blob';\n\n        // Upload progress event\n        request.upload.addEventListener('progress', (event) => {\n            this.setState({\n                barPercent: (event.loaded / event.total) * 100\n            })\n        });\n\n        // Upload complete event\n        request.upload.addEventListener('load', (event) => {\n        })\n\n        // Response event\n        request.addEventListener('load', (event) => {\n\n            // Success: Download the blob as file\n            if (request.status === 201) {\n                let link = document.createElement('a');\n                link.href = window.URL.createObjectURL(request.response);\n                link.download = this.props.file.name + '.zip';\n\n                link.click();\n            }\n\n            // Error: Display the error message\n            else if (request.status === 500) {\n                const reader = new FileReader();\n\n                reader.addEventListener(\"load\", () => {\n                    this.setState({\n                        barColor: '#a72828',\n                        content: JSON.parse(reader.result)['message']\n                    })\n                });\n                reader.readAsText(request.response);\n            }\n        });\n\n        // Send POST request to server\n        request.open(\"POST\", \"https://api.xtract.cx/extract/rar\");\n        // request.open(\"POST\", \"http://127.0.0.1:8000/extract/rar\");\n        request.send(data);\n    }\n\n    removeFile = () => {\n        this.props.removeFile(this.props.key)\n    }\n\n    render() {\n        return (\n            <div className={uploaded}>\n                <div className={image}>\n                    <img src={archiveImage} alt=\"File\" />\n                </div>\n                <div className={file_name}>{this.props.file.name}</div>\n                <div className={remove}>\n                    <img src={RemoveImage} alt=\"Remove\" title=\"Remove\" onClick={this.removeFile}/>\n                </div>\n                <div className={progress}>\n                    <div className={progress_bar} style={{width: `${this.state.barPercent}%`, backgroundColor: this.state.barColor}}/>\n                </div>\n                <div className={content}>{this.state.content}</div>\n            </div>\n        )\n    }\n}\n\nexport default UploadedFile;\n","\nimport React from \"react\";\nimport {\n    wrapper,\n    upload,\n    upload_button\n} from \"./upload_box.module.scss\"\nimport UploadedFile from \"./uploaded_file/uploaded_file\";\n\n\nclass UploadBox extends React.Component {\n\n     constructor(props) {\n        super(props);\n\n        this.state = {\n            uploadedFiles: []\n        }\n\n    }\n\n    triggerInputFile = () => {\n        document.getElementById('file-selector').click()\n    }\n\n    uploadFiles = (event) => {\n\n         // Create UploadedFile components\n        for (let file of event.target.files) {\n\n            let key = Math.floor(Math.random() * 10000);\n            this.setState({\n                uploadedFiles: [...this.state.uploadedFiles, <UploadedFile file={file} key={key} removeFile={this.removeFile(this)}/>]\n            })\n        }\n\n        // Clear the input\n        document.getElementById('file-selector').value = \"\";\n    }\n\n    removeFile = (parent) => {\n         const self = parent;\n\n         return (index) => {\n             const newUploadedFiles = [...self.state.uploadedFiles];\n             newUploadedFiles.splice(index, 1);\n\n             self.setState((state) => ({\n                 uploadedFiles: newUploadedFiles\n             }))\n         }\n    }\n\n    render() {\n        return (\n            <div className={wrapper}>\n                <div className={upload}>\n                    <input type=\"file\" id=\"file-selector\" accept=\".rar\" multiple onChange={this.uploadFiles}/>\n                    <p>Drag files here or <span className={upload_button} onClick={this.triggerInputFile}>Browse</span></p>\n                </div>\n                {this.state.uploadedFiles}\n            </div>\n        )\n    }\n}\n\nexport default UploadBox;\n","\nimport React from \"react\";\nimport UploadBox from \"./components/upload_box/upload_box\";\nimport './app.module.scss';\nimport {\n  file_upload\n} from \"./app.module.scss\";\n\n\nclass App extends React.Component {\n\n    render() {\n        return (\n            <div className={file_upload}>\n                <UploadBox />\n            </div>\n        )\n    }\n}\n\nexport default App;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"./css/reset.scss\"\nimport \"./css/styles.scss\"\nimport App from './app';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}