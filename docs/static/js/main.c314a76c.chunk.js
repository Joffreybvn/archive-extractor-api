(this.webpackJsonpextractor=this.webpackJsonpextractor||[]).push([[0],{10:function(e,t,a){e.exports={wrapper:"upload_box_wrapper__2IjXY",upload:"upload_box_upload__3fcXu",upload_button:"upload_box_upload_button__2wnDc"}},12:function(e,t,a){e.exports={file_upload:"app_file_upload__2hGc4"}},2:function(e,t,a){e.exports={uploaded:"uploaded_file_uploaded__1lCNI",image:"uploaded_file_image__2Wk_D",remove:"uploaded_file_remove__1arVv",file_name:"uploaded_file_file_name__2tdQt",progress:"uploaded_file_progress__1vfmk",progress_bar:"uploaded_file_progress_bar__155tD",progress_bar_stripes:"uploaded_file_progress_bar_stripes__srNKc",content:"uploaded_file_content__2zXkC"}},20:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(14),i=a.n(o),s=(a(20),a(21),a(3)),l=a(4),c=a(6),d=a(5),p=a(13),u=a(15),f=a(8),b=a(10),_=a.p+"static/media/close.734e2651.svg",j=a.p+"static/media/archive.4d5e04d3.svg",v=a(2),m=a(0),h=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).uploadFile=function(e){var t=new FormData;t.append("file",e,e.name);var a=new XMLHttpRequest;a.responseType="blob",a.upload.addEventListener("progress",(function(e){n.setState({barPercent:e.loaded/e.total*100,content:"Uploading"})})),a.upload.addEventListener("load",(function(e){n.setState({content:"Extracting"})})),a.addEventListener("load",(function(e){if(201===a.status){var t=document.createElement("a");console.log(a.response),t.href=window.URL.createObjectURL(a.response),t.download=n.props.file.name+".zip",n.setState({barDisplay:"none",content:Object(m.jsx)("button",{onClick:function(){t.click()},children:"Download"})})}else if(500===a.status){var r=new FileReader;r.addEventListener("load",(function(){n.setState({barColor:"#a72828",animation:"unset",content:JSON.parse(r.result).detail})})),r.readAsText(a.response)}})),a.open("POST","https://api.xtract.dev/extract"),a.send(t)},n.removeFile=function(){n.props.removeFile(n.props.key)},n.state={barPercent:0,barColor:"#28a745",barAnimation:"progress_bar_stripes 1s linear infinite",barDisplay:"flex",content:void 0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.uploadFile(this.props.file)}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:v.uploaded,children:[Object(m.jsx)("div",{className:v.image,children:Object(m.jsx)("img",{src:j,alt:"File"})}),Object(m.jsx)("div",{className:v.file_name,children:this.props.file.name}),Object(m.jsx)("div",{className:v.remove,children:Object(m.jsx)("img",{src:_,alt:"Remove",title:"Remove",onClick:this.removeFile})}),Object(m.jsx)("div",{className:v.progress,style:{display:this.state.barDisplay},children:Object(m.jsx)("div",{className:v.progress_bar,style:{width:"".concat(this.state.barPercent,"%"),backgroundColor:this.state.barColor,animation:this.state.barAnimation}})}),Object(m.jsx)("div",{className:v.content,children:this.state.content})]})}}]),a}(r.a.Component),O=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).triggerInputFile=function(){document.getElementById("file-selector").click()},n.uploadFiles=function(e){e.preventDefault();var t,a=e.target.files||e.dataTransfer.files,r=Object(u.a)(a);try{var o=function(){var e=t.value,a=Math.floor(1e4*Math.random());n.setState((function(t){return{uploadedFiles:[].concat(Object(p.a)(t.uploadedFiles),[Object(m.jsx)(h,{file:e,removeFile:n.removeFile(Object(f.a)(n))},a)])}}))};for(r.s();!(t=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}document.getElementById("file-selector").value=""},n.removeFile=function(e){var t=e;return function(e){var a=Object(p.a)(t.state.uploadedFiles);a.splice(e,1),t.setState((function(){return{uploadedFiles:a}}))}},n.state={uploadedFiles:[]},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:b.wrapper,children:[Object(m.jsxs)("div",{className:b.upload,onDrop:this.uploadFiles,onDragOver:function(e){e.preventDefault()},children:[Object(m.jsx)("input",{type:"file",id:"file-selector",accept:".rar",onChange:this.uploadFiles,multiple:!0}),Object(m.jsxs)("p",{children:["Drag files here or ",Object(m.jsx)("span",{className:b.upload_button,onClick:this.triggerInputFile,children:"Browse"})]})]}),this.state.uploadedFiles]})}}]),a}(r.a.Component),x=a(12),g=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:x.file_upload,children:Object(m.jsx)(O,{})})}}]),a}(r.a.Component);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.c314a76c.chunk.js.map